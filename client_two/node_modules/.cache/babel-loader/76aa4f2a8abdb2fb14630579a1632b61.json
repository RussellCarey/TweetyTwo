{"ast":null,"code":"var _jsxFileName = \"/Users/r/Desktop/TweetyTwo/client_two/src/context/auth/AuthState.tsx\",\n    _s = $RefreshSig$();\n\nimport { useReducer } from \"react\";\nimport axios from \"axios\";\nimport * as Cookies from \"js-cookie\";\nimport { ERequestOutcomes } from \"../../types/errors\";\nimport { SET_LOGIN_DATA } from \"./types\";\nimport AuthContext from \"./AuthContext\";\nimport AuthReducer from \"./AuthReducer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AuthState = props => {\n  _s();\n\n  const state = {\n    isLoggedIn: false,\n    jwt: \"\",\n    user: null\n  };\n  const [authState, dispatch] = useReducer(AuthReducer, state);\n\n  const getUserData = async () => {\n    try {\n      const user = await axios.request({\n        method: \"POST\",\n        withCredentials: true,\n        url: `http://localhost:3333/api/auth/getUserData`,\n        headers: {\n          authorization: `${Cookies.get(\"token\")}`\n        }\n      });\n      if (user.data.data === null) return ERequestOutcomes.hasError;\n      dispatch({\n        type: SET_LOGIN_DATA,\n        payload: user.data.data\n      });\n    } catch (error) {\n      //! Just show modal, no need to return..\n      return ERequestOutcomes.hasError;\n    }\n  };\n\n  const logoutUser = async () => {\n    try {\n      const user = await axios.request({\n        method: \"GET\",\n        withCredentials: true,\n        url: `http://127.0.0.1:3333/api/auth/logout`,\n        headers: {\n          authorization: `${Cookies.get(\"token\")}`\n        }\n      });\n      if (user.data.data === null) return ERequestOutcomes.hasError;\n      dispatch({\n        type: SET_LOGIN_DATA,\n        payload: null\n      });\n      return ERequestOutcomes.success;\n    } catch (error) {\n      return ERequestOutcomes.hasError;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      authState,\n      getUserData,\n      logoutUser\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AuthState, \"l7+p0tlJZhfrk08QCBrfgg6LDaI=\");\n\n_c = AuthState;\nexport default AuthState;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthState\");","map":{"version":3,"sources":["/Users/r/Desktop/TweetyTwo/client_two/src/context/auth/AuthState.tsx"],"names":["useReducer","axios","Cookies","ERequestOutcomes","SET_LOGIN_DATA","AuthContext","AuthReducer","AuthState","props","state","isLoggedIn","jwt","user","authState","dispatch","getUserData","request","method","withCredentials","url","headers","authorization","get","data","hasError","type","payload","error","logoutUser","success","children"],"mappings":";;;AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,OAAZ,MAAyB,WAAzB;AACA,SAASC,gBAAT,QAAiC,oBAAjC;AACA,SAASC,cAAT,QAA+D,SAA/D;AAEA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,WAAP,MAAwB,eAAxB;;;AAEA,MAAMC,SAAS,GAAIC,KAAD,IAAmB;AAAA;;AACnC,QAAMC,KAAkB,GAAG;AACzBC,IAAAA,UAAU,EAAE,KADa;AAEzBC,IAAAA,GAAG,EAAE,EAFoB;AAGzBC,IAAAA,IAAI,EAAE;AAHmB,GAA3B;AAMA,QAAM,CAACC,SAAD,EAAYC,QAAZ,IAAwBd,UAAU,CAACM,WAAD,EAAcG,KAAd,CAAxC;;AAEA,QAAMM,WAAW,GAAG,YAAY;AAC9B,QAAI;AACF,YAAMH,IAAI,GAAG,MAAMX,KAAK,CAACe,OAAN,CAAc;AAC/BC,QAAAA,MAAM,EAAE,MADuB;AAE/BC,QAAAA,eAAe,EAAE,IAFc;AAG/BC,QAAAA,GAAG,EAAG,4CAHyB;AAI/BC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,GAAEnB,OAAO,CAACoB,GAAR,CAAY,OAAZ,CAAqB;AADhC;AAJsB,OAAd,CAAnB;AASA,UAAIV,IAAI,CAACW,IAAL,CAAUA,IAAV,KAAmB,IAAvB,EAA6B,OAAOpB,gBAAgB,CAACqB,QAAxB;AAC7BV,MAAAA,QAAQ,CAAC;AAAEW,QAAAA,IAAI,EAAErB,cAAR;AAAwBsB,QAAAA,OAAO,EAAEd,IAAI,CAACW,IAAL,CAAUA;AAA3C,OAAD,CAAR;AACD,KAZD,CAYE,OAAOI,KAAP,EAAmB;AACnB;AACA,aAAOxB,gBAAgB,CAACqB,QAAxB;AACD;AACF,GAjBD;;AAmBA,QAAMI,UAAU,GAAG,YAAY;AAC7B,QAAI;AACF,YAAMhB,IAAI,GAAG,MAAMX,KAAK,CAACe,OAAN,CAAc;AAC/BC,QAAAA,MAAM,EAAE,KADuB;AAE/BC,QAAAA,eAAe,EAAE,IAFc;AAG/BC,QAAAA,GAAG,EAAG,uCAHyB;AAI/BC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,GAAEnB,OAAO,CAACoB,GAAR,CAAY,OAAZ,CAAqB;AADhC;AAJsB,OAAd,CAAnB;AASA,UAAIV,IAAI,CAACW,IAAL,CAAUA,IAAV,KAAmB,IAAvB,EAA6B,OAAOpB,gBAAgB,CAACqB,QAAxB;AAC7BV,MAAAA,QAAQ,CAAC;AAAEW,QAAAA,IAAI,EAAErB,cAAR;AAAwBsB,QAAAA,OAAO,EAAE;AAAjC,OAAD,CAAR;AACA,aAAOvB,gBAAgB,CAAC0B,OAAxB;AACD,KAbD,CAaE,OAAOF,KAAP,EAAmB;AACnB,aAAOxB,gBAAgB,CAACqB,QAAxB;AACD;AACF,GAjBD;;AAmBA,sBACE,QAAC,WAAD,CAAa,QAAb;AACE,IAAA,KAAK,EAAE;AACLX,MAAAA,SADK;AAELE,MAAAA,WAFK;AAGLa,MAAAA;AAHK,KADT;AAAA,cAOGpB,KAAK,CAACsB;AAPT;AAAA;AAAA;AAAA;AAAA,UADF;AAWD,CA1DD;;GAAMvB,S;;KAAAA,S;AA4DN,eAAeA,SAAf","sourcesContent":["import { useReducer } from \"react\";\nimport axios from \"axios\";\nimport * as Cookies from \"js-cookie\";\nimport { ERequestOutcomes } from \"../../types/errors\";\nimport { SET_LOGIN_DATA, IProps, IStateProps, IUserData } from \"./types\";\n\nimport AuthContext from \"./AuthContext\";\nimport AuthReducer from \"./AuthReducer\";\n\nconst AuthState = (props: IProps) => {\n  const state: IStateProps = {\n    isLoggedIn: false,\n    jwt: \"\",\n    user: null,\n  };\n\n  const [authState, dispatch] = useReducer(AuthReducer, state);\n\n  const getUserData = async () => {\n    try {\n      const user = await axios.request({\n        method: \"POST\",\n        withCredentials: true,\n        url: `http://localhost:3333/api/auth/getUserData`,\n        headers: {\n          authorization: `${Cookies.get(\"token\")}`,\n        },\n      });\n\n      if (user.data.data === null) return ERequestOutcomes.hasError;\n      dispatch({ type: SET_LOGIN_DATA, payload: user.data.data });\n    } catch (error: any) {\n      //! Just show modal, no need to return..\n      return ERequestOutcomes.hasError;\n    }\n  };\n\n  const logoutUser = async () => {\n    try {\n      const user = await axios.request({\n        method: \"GET\",\n        withCredentials: true,\n        url: `http://127.0.0.1:3333/api/auth/logout`,\n        headers: {\n          authorization: `${Cookies.get(\"token\")}`,\n        },\n      });\n\n      if (user.data.data === null) return ERequestOutcomes.hasError;\n      dispatch({ type: SET_LOGIN_DATA, payload: null });\n      return ERequestOutcomes.success;\n    } catch (error: any) {\n      return ERequestOutcomes.hasError;\n    }\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        authState,\n        getUserData,\n        logoutUser,\n      }}\n    >\n      {props.children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthState;\n"]},"metadata":{},"sourceType":"module"}